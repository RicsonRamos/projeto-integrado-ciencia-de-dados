<!DOCTYPE html>

<html lang="pt-br">

<head>

<meta charset="utf-8">
<meta name="generator" content="pandoc">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">


<meta name="author" content="Ricson Ramos">

<meta name="date" content="2025-02-20">

<title>Manipulação e Análise de Dados com R</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<style>h1 {font-size: 34px;}
h1.title {font-size: 38px;}
h2 {font-size: 30px;}
h3 {font-size: 24px;}
h4 {font-size: 18px;}
h5 {font-size: 16px;}
h6 {font-size: 12px;}
code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
pre:not([class]) { background-color: white }</style>
<script>

/**
 * jQuery Plugin: Sticky Tabs
 *
 * @author Aidan Lister <aidan@php.net>
 * adapted by Ruben Arslan to activate parent tabs too
 * http://www.aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/
 */
(function($) {
  "use strict";
  $.fn.rmarkdownStickyTabs = function() {
    var context = this;
    // Show the tab corresponding with the hash in the URL, or the first tab
    var showStuffFromHash = function() {
      var hash = window.location.hash;
      var selector = hash ? 'a[href="' + hash + '"]' : 'li.active > a';
      var $selector = $(selector, context);
      if($selector.data('toggle') === "tab") {
        $selector.tab('show');
        // walk up the ancestors of this element, show any hidden tabs
        $selector.parents('.section.tabset').each(function(i, elm) {
          var link = $('a[href="#' + $(elm).attr('id') + '"]');
          if(link.data('toggle') === "tab") {
            link.tab("show");
          }
        });
      }
    };


    // Set the correct tab when the page loads
    showStuffFromHash(context);

    // Set the correct tab when a user uses their back/forward button
    $(window).on('hashchange', function() {
      showStuffFromHash(context);
    });

    // Change the URL when tabs are clicked
    $('a', context).on('click', function(e) {
      history.pushState(null, null, this.href);
      showStuffFromHash(context);
    });

    return this;
  };
}(jQuery));

window.buildTabsets = function(tocID) {

  // build a tabset from a section div with the .tabset class
  function buildTabset(tabset) {

    // check for fade and pills options
    var fade = tabset.hasClass("tabset-fade");
    var pills = tabset.hasClass("tabset-pills");
    var navClass = pills ? "nav-pills" : "nav-tabs";

    // determine the heading level of the tabset and tabs
    var match = tabset.attr('class').match(/level(\d) /);
    if (match === null)
      return;
    var tabsetLevel = Number(match[1]);
    var tabLevel = tabsetLevel + 1;

    // find all subheadings immediately below
    var tabs = tabset.find("div.section.level" + tabLevel);
    if (!tabs.length)
      return;

    // create tablist and tab-content elements
    var tabList = $('<ul class="nav ' + navClass + '" role="tablist"></ul>');
    $(tabs[0]).before(tabList);
    var tabContent = $('<div class="tab-content"></div>');
    $(tabs[0]).before(tabContent);

    // build the tabset
    var activeTab = 0;
    tabs.each(function(i) {

      // get the tab div
      var tab = $(tabs[i]);

      // get the id then sanitize it for use with bootstrap tabs
      var id = tab.attr('id');

      // see if this is marked as the active tab
      if (tab.hasClass('active'))
        activeTab = i;

      // remove any table of contents entries associated with
      // this ID (since we'll be removing the heading element)
      $("div#" + tocID + " li a[href='#" + id + "']").parent().remove();

      // sanitize the id for use with bootstrap tabs
      id = id.replace(/[.\/?&!#<>]/g, '').replace(/\s/g, '_');
      tab.attr('id', id);

      // get the heading element within it, grab it's text, then remove it
      var heading = tab.find('h' + tabLevel + ':first');
      var headingText = heading.html();
      heading.remove();

      // build and append the tab list item
      var a = $('<a role="tab" data-toggle="tab">' + headingText + '</a>');
      a.attr('href', '#' + id);
      a.attr('aria-controls', id);
      var li = $('<li role="presentation"></li>');
      li.append(a);
      tabList.append(li);

      // set it's attributes
      tab.attr('role', 'tabpanel');
      tab.addClass('tab-pane');
      tab.addClass('tabbed-pane');
      if (fade)
        tab.addClass('fade');

      // move it into the tab content div
      tab.detach().appendTo(tabContent);
    });

    // set active tab
    $(tabList.children('li')[activeTab]).addClass('active');
    var active = $(tabContent.children('div.section')[activeTab]);
    active.addClass('active');
    if (fade)
      active.addClass('in');

    if (tabset.hasClass("tabset-sticky"))
      tabset.rmarkdownStickyTabs();
  }

  // convert section divs with the .tabset class to tabsets
  var tabsets = $("div.section.tabset");
  tabsets.each(function(i) {
    buildTabset($(tabsets[i]));
  });
};

</script>
<style>.hljs-literal {
color: #990073;
}
.hljs-number {
color: #099;
}
.hljs-comment {
color: #998;
font-style: italic;
}
.hljs-keyword {
color: #900;
font-weight: bold;
}
.hljs-string {
color: #d14;
}
</style>
<style>.pagedtable {
overflow: auto;
padding-left: 8px;
padding-right: 8px;
}
.pagedtable-wrapper {
border: 1px solid #ccc;
border-radius: 4px;
margin-bottom: 10px;
}
.pagedtable table {
width: 100%;
max-width: 100%;
margin: 0;
}
.pagedtable th {
padding: 0 5px 0 5px;
border: none;
border-bottom: 2px solid #dddddd;
min-width: 45px;
}
.pagedtable-empty th {
display: none;
}
.pagedtable td {
padding: 0 4px 0 4px;
}
.pagedtable .even {
background-color: rgba(140, 140, 140, 0.1);
}
.pagedtable-padding-col {
display: none;
}
.pagedtable a {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.pagedtable-index-nav {
cursor: pointer;
padding: 0 5px 0 5px;
float: right;
border: 0;
}
.pagedtable-index-nav-disabled {
cursor: default;
text-decoration: none;
color: #999;
}
a.pagedtable-index-nav-disabled:hover {
text-decoration: none;
color: #999;
}
.pagedtable-indexes {
cursor: pointer;
float: right;
border: 0;
}
.pagedtable-index-current {
cursor: default;
text-decoration: none;
font-weight: bold;
color: #333;
border: 0;
}
a.pagedtable-index-current:hover {
text-decoration: none;
font-weight: bold;
color: #333;
}
.pagedtable-index {
width: 30px;
display: inline-block;
text-align: center;
border: 0;
}
.pagedtable-index-separator-left {
display: inline-block;
color: #333;
font-size: 9px;
padding: 0 0 0 0;
cursor: default;
}
.pagedtable-index-separator-right {
display: inline-block;
color: #333;
font-size: 9px;
padding: 0 4px 0 0;
cursor: default;
}
.pagedtable-footer {
padding-top: 4px;
padding-bottom: 5px;
}
.pagedtable-not-empty .pagedtable-footer {
border-top: 2px solid #dddddd;
}
.pagedtable-info {
overflow: hidden;
color: #999;
white-space: nowrap;
text-overflow: ellipsis;
}
.pagedtable-header-name {
overflow: hidden;
text-overflow: ellipsis;
}
.pagedtable-header-type {
color: #999;
font-weight: 400;
}
.pagedtable-na-cell {
font-style: italic;
opacity: 0.3;
}
</style>
<script>// Production steps of ECMA-262, Edition 5, 15.4.4.18
// Reference: http://es5.github.io/#x15.4.4.18
if (!Array.prototype.forEach) {

  Array.prototype.forEach = function(callback, thisArg) {

    var T, k;

    if (this === null) {
      throw new TypeError(' this is null or not defined');
    }

    // 1. Let O be the result of calling toObject() passing the
    // |this| value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get() internal
    // method of O with the argument "length".
    // 3. Let len be toUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If isCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== "function") {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let
    // T be undefined.
    if (arguments.length > 1) {
      T = thisArg;
    }

    // 6. Let k be 0
    k = 0;

    // 7. Repeat, while k < len
    while (k < len) {

      var kValue;

      // a. Let Pk be ToString(k).
      //    This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty
      //    internal method of O with argument Pk.
      //    This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal
        // method of O with argument Pk.
        kValue = O[k];

        // ii. Call the Call internal method of callback with T as
        // the this value and argument list containing kValue, k, and O.
        callback.call(T, kValue, k, O);
      }
      // d. Increase k by 1.
      k++;
    }
    // 8. return undefined
  };
}

// Production steps of ECMA-262, Edition 5, 15.4.4.19
// Reference: http://es5.github.io/#x15.4.4.19
if (!Array.prototype.map) {

  Array.prototype.map = function(callback, thisArg) {

    var T, A, k;

    if (this == null) {
      throw new TypeError(' this is null or not defined');
    }

    // 1. Let O be the result of calling ToObject passing the |this|
    //    value as the argument.
    var O = Object(this);

    // 2. Let lenValue be the result of calling the Get internal
    //    method of O with the argument "length".
    // 3. Let len be ToUint32(lenValue).
    var len = O.length >>> 0;

    // 4. If IsCallable(callback) is false, throw a TypeError exception.
    // See: http://es5.github.com/#x9.11
    if (typeof callback !== 'function') {
      throw new TypeError(callback + ' is not a function');
    }

    // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.
    if (arguments.length > 1) {
      T = thisArg;
    }

    // 6. Let A be a new array created as if by the expression new Array(len)
    //    where Array is the standard built-in constructor with that name and
    //    len is the value of len.
    A = new Array(len);

    // 7. Let k be 0
    k = 0;

    // 8. Repeat, while k < len
    while (k < len) {

      var kValue, mappedValue;

      // a. Let Pk be ToString(k).
      //   This is implicit for LHS operands of the in operator
      // b. Let kPresent be the result of calling the HasProperty internal
      //    method of O with argument Pk.
      //   This step can be combined with c
      // c. If kPresent is true, then
      if (k in O) {

        // i. Let kValue be the result of calling the Get internal
        //    method of O with argument Pk.
        kValue = O[k];

        // ii. Let mappedValue be the result of calling the Call internal
        //     method of callback with T as the this value and argument
        //     list containing kValue, k, and O.
        mappedValue = callback.call(T, kValue, k, O);

        // iii. Call the DefineOwnProperty internal method of A with arguments
        // Pk, Property Descriptor
        // { Value: mappedValue,
        //   Writable: true,
        //   Enumerable: true,
        //   Configurable: true },
        // and false.

        // In browsers that support Object.defineProperty, use the following:
        // Object.defineProperty(A, k, {
        //   value: mappedValue,
        //   writable: true,
        //   enumerable: true,
        //   configurable: true
        // });

        // For best browser support, use the following:
        A[k] = mappedValue;
      }
      // d. Increase k by 1.
      k++;
    }

    // 9. return A
    return A;
  };
}

var PagedTable = function (pagedTable) {
  var me = this;

  var source = function(pagedTable) {
    var sourceElems = [].slice.call(pagedTable.children).filter(function(e) {
      return e.hasAttribute("data-pagedtable-source");
    });

    if (sourceElems === null || sourceElems.length !== 1) {
      throw("A single data-pagedtable-source was not found");
    }

    return JSON.parse(sourceElems[0].innerHTML);
  }(pagedTable);

  var options = function(source) {
    var options = typeof(source.options) !== "undefined" &&
      source.options !== null ? source.options : {};

    var columns = typeof(options.columns) !== "undefined" ? options.columns : {};
    var rows = typeof(options.rows) !== "undefined" ? options.rows : {};

    var positiveIntOrNull = function(value) {
      return parseInt(value) >= 0 ? parseInt(value) : null;
    };

    return {
      pages: positiveIntOrNull(options.pages),
      rows: {
        min: positiveIntOrNull(rows.min),
        max: positiveIntOrNull(rows.max),
        total: positiveIntOrNull(rows.total)
      },
      columns: {
        min: positiveIntOrNull(columns.min),
        max: positiveIntOrNull(columns.max),
        total: positiveIntOrNull(columns.total)
      }
    };
  }(source);

  var Measurer = function() {

    // set some default initial values that will get adjusted in runtime
    me.measures = {
      padding: 12,
      character: 8,
      height: 15,
      defaults: true
    };

    me.calculate = function(measuresCell) {
      if (!me.measures.defaults)
        return;

      var measuresCellStyle = window.getComputedStyle(measuresCell, null);

      var newPadding = parsePadding(measuresCellStyle.paddingLeft) +
            parsePadding(measuresCellStyle.paddingRight);

      var sampleString = "ABCDEFGHIJ0123456789";
      var newCharacter = Math.ceil(measuresCell.clientWidth / sampleString.length);

      if (newPadding <= 0 || newCharacter <= 0)
        return;

      me.measures.padding = newPadding;
      me.measures.character = newCharacter;
      me.measures.height = measuresCell.clientHeight;
      me.measures.defaults = false;
    };

    return me;
  };

  var Page = function(data, options) {
    var me = this;

    var defaults = {
      max: 7,
      rows: 10
    };

    var totalPages = function() {
      return Math.ceil(data.length / me.rows);
    };

    me.number = 0;
    me.max = options.pages !== null ? options.pages : defaults.max;
    me.visible = me.max;
    me.rows = options.rows.min !== null ? options.rows.min : defaults.rows;
    me.total = totalPages();

    me.setRows = function(newRows) {
      me.rows = newRows;
      me.total = totalPages();
    };

    me.setPageNumber = function(newPageNumber) {
      if (newPageNumber < 0) newPageNumber = 0;
      if (newPageNumber >= me.total) newPageNumber = me.total - 1;

      me.number = newPageNumber;
    };

    me.setVisiblePages = function(visiblePages) {
      me.visible = Math.min(me.max, visiblePages);
      me.setPageNumber(me.number);
    };

    me.getVisiblePageRange = function() {
      var start = me.number - Math.max(Math.floor((me.visible - 1) / 2), 0);
      var end = me.number + Math.floor(me.visible / 2) + 1;
      var pageCount = me.total;

      if (start < 0) {
        var diffToStart = 0 - start;
        start += diffToStart;
        end += diffToStart;
      }

      if (end > pageCount) {
        var diffToEnd = end - pageCount;
        start -= diffToEnd;
        end -= diffToEnd;
      }

      start = start < 0 ? 0 : start;
      end = end >= pageCount ? pageCount : end;

      var first = false;
      var last = false;

      if (start > 0 && me.visible > 1) {
        start = start + 1;
        first = true;
      }

      if (end < pageCount && me.visible > 2) {
        end = end - 1;
        last = true;
      }

      return {
        first: first,
        start: start,
        end: end,
        last: last
      };
    };

    me.getRowStart = function() {
      var rowStart = page.number * page.rows;
      if (rowStart < 0)
        rowStart = 0;

      return rowStart;
    };

    me.getRowEnd = function() {
      var rowStart = me.getRowStart();
      return Math.min(rowStart + me.rows, data.length);
    };

    me.getPaddingRows = function() {
      var rowStart = me.getRowStart();
      var rowEnd = me.getRowEnd();
      return data.length > me.rows ? me.rows - (rowEnd - rowStart) : 0;
    };
  };

  var Columns = function(data, columns, options) {
    var me = this;

    me.defaults = {
      min: 5
    };

    me.number = 0;
    me.visible = 0;
    me.total = columns.length;
    me.subset = [];
    me.padding = 0;
    me.min = options.columns.min !== null ? options.columns.min : me.defaults.min;
    me.max = options.columns.max !== null ? options.columns.max : null;
    me.widths = {};

    var widthsLookAhead = Math.max(100, options.rows.min);
    var paddingColChars = 10;

    me.emptyNames = function() {
      columns.forEach(function(column) {
        if (columns.label !== null && columns.label !== "")
          return false;
      });

      return true;
    };

    var parsePadding = function(value) {
      return parseInt(value) >= 0 ? parseInt(value) : 0;
    };

    me.calculateWidths = function(measures) {
      columns.forEach(function(column) {
        var maxChars = Math.max(
          column.label.toString().length,
          column.type.toString().length
        );

        for (var idxRow = 0; idxRow < Math.min(widthsLookAhead, data.length); idxRow++) {
          maxChars = Math.max(maxChars, data[idxRow][column.name.toString()].length);
        }

        me.widths[column.name] = {
          // width in characters
          chars: maxChars,
          // width for the inner html columns
          inner: maxChars * measures.character,
          // width adding outer styles like padding
          outer: maxChars * measures.character + measures.padding
        };
      });
    };

    me.getWidth = function() {
      var widthOuter = 0;
      for (var idxCol = 0; idxCol < me.subset.length; idxCol++) {
        var columnName = me.subset[idxCol].name;
        widthOuter = widthOuter + me.widths[columnName].outer;
      }

      widthOuter = widthOuter + me.padding * paddingColChars * measurer.measures.character;

      if (me.hasMoreLeftColumns()) {
        widthOuter = widthOuter + columnNavigationWidthPX + measurer.measures.padding;
      }

      if (me.hasMoreRightColumns()) {
        widthOuter = widthOuter + columnNavigationWidthPX + measurer.measures.padding;
      }

      return widthOuter;
    };

    me.updateSlice = function() {
      if (me.number + me.visible >= me.total)
        me.number = me.total - me.visible;

      if (me.number < 0) me.number = 0;

      me.subset = columns.slice(me.number, Math.min(me.number + me.visible, me.total));

      me.subset = me.subset.map(function(column) {
        Object.keys(column).forEach(function(colKey) {
          column[colKey] = column[colKey] === null ? "" : column[colKey].toString();
        });

        column.width = null;
        return column;
      });
    };

    me.setVisibleColumns = function(columnNumber, newVisibleColumns, paddingCount) {
      me.number = columnNumber;
      me.visible = newVisibleColumns;
      me.padding = paddingCount;

      me.updateSlice();
    };

    me.incColumnNumber = function(increment) {
      me.number = me.number + increment;
    };

    me.setColumnNumber = function(newNumber) {
      me.number = newNumber;
    };

    me.setPaddingCount = function(newPadding) {
      me.padding = newPadding;
    };

    me.getPaddingCount = function() {
      return me.padding;
    };

    me.hasMoreLeftColumns = function() {
      return me.number > 0;
    };

    me.hasMoreRightColumns = function() {
      return me.number + me.visible < me.total;
    };

    me.updateSlice(0);
    return me;
  };

  var data = source.data;
  var page = new Page(data, options);
  var measurer = new Measurer(data, options);
  var columns = new Columns(data, source.columns, options);

  var table = null;
  var tableDiv = null;
  var header = null;
  var footer = null;
  var tbody = null;

  // Caches pagedTable.clientWidth, specially for webkit
  var cachedPagedTableClientWidth = null;

  var onChangeCallbacks = [];

  var clearSelection = function() {
    if(document.selection && document.selection.empty) {
      document.selection.empty();
    } else if(window.getSelection) {
      var sel = window.getSelection();
      sel.removeAllRanges();
    }
  };

  var columnNavigationWidthPX = 5;

  var renderColumnNavigation = function(increment, backwards) {
    var arrow = document.createElement("div");
    arrow.setAttribute("style",
      "border-top: " + columnNavigationWidthPX + "px solid transparent;" +
      "border-bottom: " + columnNavigationWidthPX + "px solid transparent;" +
      "border-" + (backwards ? "right" : "left") + ": " + columnNavigationWidthPX + "px solid;");

    var header = document.createElement("th");
    header.appendChild(arrow);
    header.setAttribute("style",
      "cursor: pointer;" +
      "vertical-align: middle;" +
      "min-width: " + columnNavigationWidthPX + "px;" +
      "width: " + columnNavigationWidthPX + "px;");

    header.onclick = function() {
      columns.incColumnNumber(backwards ? -1 : increment);

      me.animateColumns(backwards);
      renderFooter();

      clearSelection();
      triggerOnChange();
    };

    return header;
  };

  var maxColumnWidth = function(width) {
    var padding = 80;
    var columnMax = Math.max(cachedPagedTableClientWidth - padding, 0);

    return parseInt(width) > 0 ?
      Math.min(columnMax, parseInt(width)) + "px" :
      columnMax + "px";
  };

  var clearHeader = function() {
    var thead = pagedTable.querySelectorAll("thead")[0];
    thead.innerHTML = "";
  };

  var renderHeader = function(clear) {
    cachedPagedTableClientWidth = pagedTable.clientWidth;

    var fragment = document.createDocumentFragment();

    header = document.createElement("tr");
    fragment.appendChild(header);

    if (columns.number > 0)
      header.appendChild(renderColumnNavigation(-columns.visible, true));

    columns.subset = columns.subset.map(function(columnData) {
      var column = document.createElement("th");
      column.setAttribute("align", columnData.align);
      column.style.textAlign = columnData.align;

      column.style.maxWidth = maxColumnWidth(null);
      if (columnData.width) {
        column.style.minWidth =
          column.style.maxWidth = maxColumnWidth(columnData.width);
      }

      var columnName = document.createElement("div");
      columnName.setAttribute("class", "pagedtable-header-name");
      if (columnData.label === "") {
        columnName.innerHTML = "&nbsp;";
      }
      else {
        columnName.appendChild(document.createTextNode(columnData.label));
      }
      column.appendChild(columnName);

      var columnType = document.createElement("div");
      columnType.setAttribute("class", "pagedtable-header-type");
      if (columnData.type === "") {
        columnType.innerHTML = "&nbsp;";
      }
      else {
        columnType.appendChild(document.createTextNode("<" + columnData.type + ">"));
      }
      column.appendChild(columnType);

      header.appendChild(column);

      columnData.element = column;

      return columnData;
    });

    for (var idx = 0; idx < columns.getPaddingCount(); idx++) {
      var paddingCol = document.createElement("th");
      paddingCol.setAttribute("class", "pagedtable-padding-col");
      header.appendChild(paddingCol);
    }

    if (columns.number + columns.visible < columns.total)
      header.appendChild(renderColumnNavigation(columns.visible, false));

    if (typeof(clear) == "undefined" || clear) clearHeader();
    var thead = pagedTable.querySelectorAll("thead")[0];
    thead.appendChild(fragment);
  };

  me.animateColumns = function(backwards) {
    var thead = pagedTable.querySelectorAll("thead")[0];

    var headerOld = thead.querySelectorAll("tr")[0];
    var tbodyOld = table.querySelectorAll("tbody")[0];

    me.fitColumns(backwards);

    renderHeader(false);

    header.style.opacity = "0";
    header.style.transform = backwards ? "translateX(-30px)" : "translateX(30px)";
    header.style.transition = "transform 200ms linear, opacity 200ms";
    header.style.transitionDelay = "0";

    renderBody(false);

    if (headerOld) {
      headerOld.style.position = "absolute";
      headerOld.style.transform = "translateX(0px)";
      headerOld.style.opacity = "1";
      headerOld.style.transition = "transform 100ms linear, opacity 100ms";
      headerOld.setAttribute("class", "pagedtable-remove-head");
      if (headerOld.style.transitionEnd) {
        headerOld.addEventListener("transitionend", function() {
          var headerOldByClass = thead.querySelector(".pagedtable-remove-head");
          if (headerOldByClass) thead.removeChild(headerOldByClass);
        });
      }
      else {
        thead.removeChild(headerOld);
      }
    }

    if (tbodyOld) table.removeChild(tbodyOld);

    tbody.style.opacity = "0";
    tbody.style.transition = "transform 200ms linear, opacity 200ms";
    tbody.style.transitionDelay = "0ms";

    // force relayout
    window.getComputedStyle(header).opacity;
    window.getComputedStyle(tbody).opacity;

    if (headerOld) {
      headerOld.style.transform = backwards ? "translateX(20px)" : "translateX(-30px)";
      headerOld.style.opacity = "0";
    }

    header.style.transform = "translateX(0px)";
    header.style.opacity = "1";

    tbody.style.opacity = "1";
  }

  me.onChange = function(callback) {
    onChangeCallbacks.push(callback);
  };

  var triggerOnChange = function() {
    onChangeCallbacks.forEach(function(onChange) {
      onChange();
    });
  };

  var clearBody = function() {
    if (tbody) {
      table.removeChild(tbody);
      tbody = null;
    }
  };

  var renderBody = function(clear) {
    cachedPagedTableClientWidth = pagedTable.clientWidth

    var fragment = document.createDocumentFragment();

    var pageData = data.slice(page.getRowStart(), page.getRowEnd());

    pageData.forEach(function(dataRow, idxRow) {
      var htmlRow = document.createElement("tr");
      htmlRow.setAttribute("class", (idxRow % 2 !==0) ? "even" : "odd");

      if (columns.hasMoreLeftColumns())
        htmlRow.appendChild(document.createElement("td"));

      columns.subset.forEach(function(columnData) {
        var cellName = columnData.name;
        var dataCell = dataRow[cellName];
        var htmlCell = document.createElement("td");

        if (dataCell === "NA") htmlCell.setAttribute("class", "pagedtable-na-cell");
        if (dataCell === "__NA__") dataCell = "NA";

        var cellText = document.createTextNode(dataCell);
        htmlCell.appendChild(cellText);
        if (dataCell.length > 50) {
          htmlCell.setAttribute("title", dataCell);
        }
        htmlCell.setAttribute("align", columnData.align);
        htmlCell.style.textAlign = columnData.align;
        htmlCell.style.maxWidth = maxColumnWidth(null);
        if (columnData.width) {
          htmlCell.style.minWidth = htmlCell.style.maxWidth = maxColumnWidth(columnData.width);
        }
        htmlRow.appendChild(htmlCell);
      });

      for (var idx = 0; idx < columns.getPaddingCount(); idx++) {
        var paddingCol = document.createElement("td");
        paddingCol.setAttribute("class", "pagedtable-padding-col");
        htmlRow.appendChild(paddingCol);
      }

      if (columns.hasMoreRightColumns())
        htmlRow.appendChild(document.createElement("td"));

      fragment.appendChild(htmlRow);
    });

    for (var idxPadding = 0; idxPadding < page.getPaddingRows(); idxPadding++) {
      var paddingRow = document.createElement("tr");

      var paddingCellRow = document.createElement("td");
      paddingCellRow.innerHTML = "&nbsp;";
      paddingCellRow.setAttribute("colspan", "100%");
      paddingRow.appendChild(paddingCellRow);

      fragment.appendChild(paddingRow);
    }

    if (typeof(clear) == "undefined" || clear) clearBody();
    tbody = document.createElement("tbody");
    tbody.appendChild(fragment);

    table.appendChild(tbody);
  };

  var getLabelInfo = function() {
    var pageStart = page.getRowStart();
    var pageEnd = page.getRowEnd();
    var totalRows = data.length;

    var totalRowsLabel = options.rows.total ? options.rows.total : totalRows;
    var totalRowsLabelFormat = totalRowsLabel.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, '$1,');

    var infoText = (pageStart + 1) + "-" + pageEnd + " of " + totalRowsLabelFormat + " rows";
    if (totalRows < page.rows) {
      infoText = totalRowsLabel + " row" + (totalRows != 1 ? "s" : "");
    }
    if (columns.total > columns.visible) {
      var totalColumnsLabel = options.columns.total ? options.columns.total : columns.total;

      infoText = infoText + " | " + (columns.number + 1) + "-" +
        (Math.min(columns.number + columns.visible, columns.total)) +
        " of " + totalColumnsLabel + " columns";
    }

    return infoText;
  };

  var clearFooter = function() {
    footer = pagedTable.querySelectorAll("div.pagedtable-footer")[0];
    footer.innerHTML = "";

    return footer;
  };

  var createPageLink = function(idxPage) {
    var pageLink = document.createElement("a");
    pageLinkClass = idxPage === page.number ? "pagedtable-index pagedtable-index-current" : "pagedtable-index";
    pageLink.setAttribute("class", pageLinkClass);
    pageLink.setAttribute("data-page-index", idxPage);
    pageLink.onclick = function() {
      page.setPageNumber(parseInt(this.getAttribute("data-page-index")));
      renderBody();
      renderFooter();

      triggerOnChange();
    };

    pageLink.appendChild(document.createTextNode(idxPage + 1));

    return pageLink;
  }

  var renderFooter = function() {
    footer = clearFooter();

    var next = document.createElement("a");
    next.appendChild(document.createTextNode("Next"));
    next.onclick = function() {
      page.setPageNumber(page.number + 1);
      renderBody();
      renderFooter();

      triggerOnChange();
    };
    if (data.length > page.rows) footer.appendChild(next);

    var pageNumbers = document.createElement("div");
    pageNumbers.setAttribute("class", "pagedtable-indexes");

    var pageRange = page.getVisiblePageRange();

    if (pageRange.first) {
      var pageLink = createPageLink(0);
      pageNumbers.appendChild(pageLink);

      var pageSeparator = document.createElement("div");
      pageSeparator.setAttribute("class", "pagedtable-index-separator-left");
      pageSeparator.appendChild(document.createTextNode("..."))
      pageNumbers.appendChild(pageSeparator);
    }

    for (var idxPage = pageRange.start; idxPage < pageRange.end; idxPage++) {
      var pageLink = createPageLink(idxPage);

      pageNumbers.appendChild(pageLink);
    }

    if (pageRange.last) {
      var pageSeparator = document.createElement("div");
      pageSeparator.setAttribute("class", "pagedtable-index-separator-right");
      pageSeparator.appendChild(document.createTextNode("..."))
      pageNumbers.appendChild(pageSeparator);

      var pageLink = createPageLink(page.total - 1);
      pageNumbers.appendChild(pageLink);
    }

    if (data.length > page.rows) footer.appendChild(pageNumbers);

    var previous = document.createElement("a");
    previous.appendChild(document.createTextNode("Previous"));
    previous.onclick = function() {
      page.setPageNumber(page.number - 1);
      renderBody();
      renderFooter();

      triggerOnChange();
    };
    if (data.length > page.rows) footer.appendChild(previous);

    var infoLabel = document.createElement("div");
    infoLabel.setAttribute("class", "pagedtable-info");
    infoLabel.setAttribute("title", getLabelInfo());
    infoLabel.appendChild(document.createTextNode(getLabelInfo()));
    footer.appendChild(infoLabel);

    var enabledClass = "pagedtable-index-nav";
    var disabledClass = "pagedtable-index-nav pagedtable-index-nav-disabled";
    previous.setAttribute("class", page.number <= 0 ? disabledClass : enabledClass);
    next.setAttribute("class", (page.number + 1) * page.rows >= data.length ? disabledClass : enabledClass);
  };

  var measuresCell = null;

  var renderMeasures = function() {
    var measuresTable = document.createElement("table");
    measuresTable.style.visibility = "hidden";
    measuresTable.style.position = "absolute";
    measuresTable.style.whiteSpace = "nowrap";
    measuresTable.style.height = "auto";
    measuresTable.style.width = "auto";

    var measuresRow = document.createElement("tr");
    measuresTable.appendChild(measuresRow);

    measuresCell = document.createElement("td");
    var sampleString = "ABCDEFGHIJ0123456789";
    measuresCell.appendChild(document.createTextNode(sampleString));

    measuresRow.appendChild(measuresCell);

    tableDiv.appendChild(measuresTable);
  }

  me.init = function() {
    tableDiv = document.createElement("div");
    pagedTable.appendChild(tableDiv);
    var pagedTableClass = data.length > 0 ?
      "pagedtable pagedtable-not-empty" :
      "pagedtable pagedtable-empty";

    if (columns.total == 0 || (columns.emptyNames() && data.length == 0)) {
      pagedTableClass = pagedTableClass + " pagedtable-empty-columns";
    }

    tableDiv.setAttribute("class", pagedTableClass);

    renderMeasures();
    measurer.calculate(measuresCell);
    columns.calculateWidths(measurer.measures);

    table = document.createElement("table");
    table.setAttribute("cellspacing", "0");
    table.setAttribute("class", "table table-condensed");
    tableDiv.appendChild(table);

    table.appendChild(document.createElement("thead"));

    var footerDiv = document.createElement("div");
    footerDiv.setAttribute("class", "pagedtable-footer");
    tableDiv.appendChild(footerDiv);

    // if the host has not yet provided horizontal space, render hidden
    if (tableDiv.clientWidth <= 0) {
      tableDiv.style.opacity = "0";
    }

    me.render();

    // retry seizing columns later if the host has not provided space
    function retryFit() {
      if (tableDiv.clientWidth <= 0) {
        setTimeout(retryFit, 100);
      } else {
        me.render();
        triggerOnChange();
      }
    }
    if (tableDiv.clientWidth <= 0) {
      retryFit();
    }
  };

  var registerWidths = function() {
    columns.subset = columns.subset.map(function(column) {
      column.width = columns.widths[column.name].inner;
      return column;
    });
  };

  var parsePadding = function(value) {
    return parseInt(value) >= 0 ? parseInt(value) : 0;
  };

  me.fixedHeight = function() {
    return options.rows.max != null;
  }

  me.fitRows = function() {
    if (me.fixedHeight())
      return;

    measurer.calculate(measuresCell);

    var rows = options.rows.min !== null ? options.rows.min : 0;
    var headerHeight = header !== null && header.offsetHeight > 0 ? header.offsetHeight : 0;
    var footerHeight = footer !== null && footer.offsetHeight > 0 ? footer.offsetHeight : 0;

    if (pagedTable.offsetHeight > 0) {
      var availableHeight = pagedTable.offsetHeight - headerHeight - footerHeight;
      rows = Math.floor((availableHeight) / measurer.measures.height);
    }

    rows = options.rows.min !== null ? Math.max(options.rows.min, rows) : rows;

    page.setRows(rows);
  }

  // The goal of this function is to add as many columns as possible
  // starting from left-to-right, when the right most limit is reached
  // it tries to add columns from the left as well.
  //
  // When startBackwards is true columns are added from right-to-left
  me.fitColumns = function(startBackwards) {
    measurer.calculate(measuresCell);
    columns.calculateWidths(measurer.measures);

    if (tableDiv.clientWidth > 0) {
      tableDiv.style.opacity = 1;
    }

    var visibleColumns = tableDiv.clientWidth <= 0 ? Math.max(columns.min, 1) : 1;
    var columnNumber = columns.number;
    var paddingCount = 0;

    // track a list of added columns as we build the visible ones to allow us
    // to remove columns when they don't fit anymore.
    var columnHistory = [];

    var lastTableHeight = 0;
    var backwards = startBackwards;

    var tableDivStyle = window.getComputedStyle(tableDiv, null);
    var tableDivPadding = parsePadding(tableDivStyle.paddingLeft) +
      parsePadding(tableDivStyle.paddingRight);

    var addPaddingCol = false;
    var currentWidth = 0;

    while (true) {
      columns.setVisibleColumns(columnNumber, visibleColumns, paddingCount);
      currentWidth = columns.getWidth();

      if (tableDiv.clientWidth - tableDivPadding < currentWidth) {
        break;
      }

      columnHistory.push({
        columnNumber: columnNumber,
        visibleColumns: visibleColumns,
        paddingCount: paddingCount
      });

      if (columnHistory.length > 100) {
        console.error("More than 100 tries to fit columns, aborting");
        break;
      }

      if (columns.max !== null &&
        columns.visible + columns.getPaddingCount() >= columns.max) {
        break;
      }

      // if we run out of right-columns
      if (!backwards && columnNumber + columns.visible >= columns.total) {
        // if we started adding right-columns, try adding left-columns
        if (!startBackwards && columnNumber > 0) {
          backwards = true;
        }
        else if (columns.min === null || visibleColumns + columns.getPaddingCount() >= columns.min) {
          break;
        }
        else {
          paddingCount = paddingCount + 1;
        }
      }

      // if we run out of left-columns
      if (backwards && columnNumber == 0) {
        // if we started adding left-columns, try adding right-columns
        if (startBackwards && columnNumber + columns.visible < columns.total) {
          backwards = false;
        }
        else if (columns.min === null || visibleColumns + columns.getPaddingCount() >= columns.min) {
          break;
        }
        else {
          paddingCount = paddingCount + 1;
        }
      }

      // when moving backwards try fitting left columns first
      if (backwards && columnNumber > 0) {
        columnNumber = columnNumber - 1;
      }

      if (columnNumber + visibleColumns < columns.total) {
        visibleColumns = visibleColumns + 1;
      }
    }

    var lastRenderableColumn = {
        columnNumber: columnNumber,
        visibleColumns: visibleColumns,
        paddingCount: paddingCount
    };

    if (columnHistory.length > 0) {
      lastRenderableColumn = columnHistory[columnHistory.length - 1];
    }

    columns.setVisibleColumns(
      lastRenderableColumn.columnNumber,
      lastRenderableColumn.visibleColumns,
      lastRenderableColumn.paddingCount);

    if (pagedTable.offsetWidth > 0) {
      page.setVisiblePages(Math.max(Math.ceil(1.0 * (pagedTable.offsetWidth - 250) / 40), 2));
    }

    registerWidths();
  };

  me.fit = function(startBackwards) {
    me.fitRows();
    me.fitColumns(startBackwards);
  }

  me.render = function() {
    me.fitColumns(false);

    // render header/footer to measure height accurately
    renderHeader();
    renderFooter();

    me.fitRows();
    renderBody();

    // re-render footer to match new rows
    renderFooter();
  }

  var resizeLastWidth = -1;
  var resizeLastHeight = -1;
  var resizeNewWidth = -1;
  var resizeNewHeight = -1;
  var resizePending = false;

  me.resize = function(newWidth, newHeight) {

    function resizeDelayed() {
      resizePending = false;

      if (
        (resizeNewWidth !== resizeLastWidth) ||
        (!me.fixedHeight() && resizeNewHeight !== resizeLastHeight)
      ) {
        resizeLastWidth = resizeNewWidth;
        resizeLastHeight = resizeNewHeight;

        setTimeout(resizeDelayed, 200);
        resizePending = true;
      } else {
        me.render();
        triggerOnChange();

        resizeLastWidth = -1;
        resizeLastHeight = -1;
      }
    }

    resizeNewWidth = newWidth;
    resizeNewHeight = newHeight;

    if (!resizePending) resizeDelayed();
  };
};

var PagedTableDoc;
(function (PagedTableDoc) {
  var allPagedTables = [];

  PagedTableDoc.initAll = function() {
    allPagedTables = [];

    var pagedTables = [].slice.call(document.querySelectorAll('[data-pagedtable="false"],[data-pagedtable=""]'));
    pagedTables.forEach(function(pagedTable, idx) {
      pagedTable.setAttribute("data-pagedtable", "true");
      pagedTable.setAttribute("pagedtable-page", 0);
      pagedTable.setAttribute("class", "pagedtable-wrapper");

      var pagedTableInstance = new PagedTable(pagedTable);
      pagedTableInstance.init();

      allPagedTables.push(pagedTableInstance);
    });
  };

  PagedTableDoc.resizeAll = function() {
    allPagedTables.forEach(function(pagedTable) {
      pagedTable.render();
    });
  };

  window.addEventListener("resize", PagedTableDoc.resizeAll);

  return PagedTableDoc;
})(PagedTableDoc || (PagedTableDoc = {}));

window.onload = function() {
  PagedTableDoc.initAll();
};
</script>

<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>

<style>code{white-space: pre;}</style>
<script>
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style>
.main-container {
max-width: 940px;
margin-left: auto;
margin-right: auto;
}
img {
max-width:100%;
}
.tabbed-pane {
padding-top: 12px;
}
.html-widget {
margin-bottom: 20px;
}
button.code-folding-btn:focus {
outline: none;
}
summary {
display: list-item;
}
details > summary > p:only-child {
display: inline;
}
pre code {
padding: 0;
}
</style>



<!-- tabsets -->

<style>
.tabset-dropdown > .nav-tabs {
display: inline-table;
max-height: 500px;
min-height: 44px;
overflow-y: auto;
border: 1px solid #ddd;
border-radius: 4px;
}
.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
content: "\e259";
font-family: 'Glyphicons Halflings';
display: inline-block;
padding: 10px;
border-right: 1px solid #ddd;
}
.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
content: "\e258";
font-family: 'Glyphicons Halflings';
border: none;
}
.tabset-dropdown > .nav-tabs > li.active {
display: block;
}
.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
border: none;
display: inline-block;
border-radius: 4px;
background-color: transparent;
}
.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
display: block;
float: none;
}
.tabset-dropdown > .nav-tabs > li {
display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div id="header">



<h1 class="title toc-ignore">Manipulação e Análise de Dados com R</h1>
<h4 class="author">Ricson Ramos</h4>
<h4 class="date">2025-02-20</h4>

</div>


<div id="importação-de-bibliotecas" class="section level2">
<h2>Importação de Bibliotecas</h2>
<pre class="r"><code>library(dplyr)
library(ggplot2)
library(tidyr)</code></pre>
</div>
<div id="carregamento-dos-dados" class="section level2">
<h2>Carregamento dos Dados</h2>
<pre class="r"><code>dados &lt;- read.csv(&quot;datatran2024.csv&quot;, sep = &quot;;&quot;, fill = TRUE, check.names = FALSE, encoding = &quot;latin1&quot;)</code></pre>
</div>
<div id="exploração-inicial-dos-dados" class="section level2">
<h2>Exploração Inicial dos Dados</h2>
<pre class="r"><code>##Estrutura das Variáveis
str(dados)</code></pre>
<pre><code>## &#39;data.frame&#39;:    60365 obs. of  30 variables:
##  $ id                    : chr  &quot;571789&quot; &quot;571804&quot; &quot;571806&quot; &quot;571818&quot; ...
##  $ data_inversa          : chr  &quot;01/01/2024&quot; &quot;01/01/2024&quot; &quot;01/01/2024&quot; &quot;01/01/2024&quot; ...
##  $ dia_semana            : chr  &quot;segunda-feira&quot; &quot;segunda-feira&quot; &quot;segunda-feira&quot; &quot;segunda-feira&quot; ...
##  $ horario               : chr  &quot;03:56:00&quot; &quot;04:50:00&quot; &quot;04:30:00&quot; &quot;06:30:00&quot; ...
##  $ uf                    : chr  &quot;ES&quot; &quot;PI&quot; &quot;BA&quot; &quot;SE&quot; ...
##  $ br                    : int  101 343 116 101 364 251 116 251 116 262 ...
##  $ km                    : chr  &quot;38&quot; &quot;185&quot; &quot;578&quot; &quot;18&quot; ...
##  $ municipio             : chr  &quot;CONCEICAO DA BARRA&quot; &quot;PIRIPIRI&quot; &quot;BREJOES&quot; &quot;MALHADA DOS BOIS&quot; ...
##  $ causa_acidente        : chr  &quot;Ultrapassagem Indevida&quot; &quot;Manobra de mudança de faixa&quot; &quot;Ingestão de álcool pelo condutor&quot; &quot;Reação tardia ou ineficiente do condutor&quot; ...
##  $ tipo_acidente         : chr  &quot;Colisão lateral sentido oposto&quot; &quot;Colisão frontal&quot; &quot;Colisão frontal&quot; &quot;Saída de leito carroçável&quot; ...
##  $ classificacao_acidente: chr  NA &quot;Com Vítimas Fatais&quot; &quot;Com Vítimas Fatais&quot; &quot;Com Vítimas Feridas&quot; ...
##  $ fase_dia              : chr  &quot;Plena Noite&quot; &quot;Amanhecer&quot; &quot;Plena Noite&quot; &quot;Amanhecer&quot; ...
##  $ sentido_via           : chr  &quot;Crescente&quot; &quot;Decrescente&quot; &quot;Decrescente&quot; &quot;Crescente&quot; ...
##  $ condicao_metereologica: chr  &quot;Céu Claro&quot; &quot;Céu Claro&quot; &quot;Céu Claro&quot; &quot;Céu Claro&quot; ...
##  $ tipo_pista            : chr  &quot;Simples&quot; &quot;Simples&quot; &quot;Simples&quot; &quot;Dupla&quot; ...
##  $ tracado_via           : chr  &quot;Reta&quot; &quot;Reta&quot; &quot;Curva&quot; &quot;Declive;Reta&quot; ...
##  $ uso_solo              : chr  &quot;Não&quot; &quot;Sim&quot; &quot;Não&quot; &quot;Não&quot; ...
##  $ pessoas               : int  3 2 3 2 3 3 4 4 2 1 ...
##  $ mortos                : int  0 1 1 0 0 0 2 0 0 0 ...
##  $ feridos_leves         : int  0 0 0 0 0 1 0 2 1 0 ...
##  $ feridos_graves        : int  1 0 0 1 0 0 0 0 0 0 ...
##  $ ilesos                : int  1 1 1 0 2 1 2 1 0 1 ...
##  $ ignorados             : int  1 0 2 2 1 1 0 3 1 0 ...
##  $ feridos               : int  1 0 0 1 0 1 0 2 1 0 ...
##  $ veiculos              : int  3 2 4 3 3 3 2 5 2 1 ...
##  $ latitude              : chr  &quot;-18,48261&quot; &quot;-4,29603281&quot; &quot;-13,07158302&quot; &quot;-10,35601949&quot; ...
##  $ longitude             : chr  &quot;-39,92379&quot; &quot;-41,76732659&quot; &quot;-39,9611107&quot; &quot;-36,90552235&quot; ...
##  $ regional              : chr  &quot;SPRF-ES&quot; &quot;SPRF-PI&quot; &quot;SPRF-BA&quot; &quot;SPRF-SE&quot; ...
##  $ delegacia             : chr  &quot;DEL04-ES&quot; &quot;DEL02-PI&quot; &quot;DEL03-BA&quot; &quot;DEL02-SE&quot; ...
##  $ uop                   : chr  &quot;UOP02-DEL04-ES&quot; &quot;UOP01-DEL02-PI&quot; &quot;UOP02-DEL03-BA&quot; &quot;UOP02-DEL02-SE&quot; ...</code></pre>
<pre class="r"><code>##Resumo Estatístico
summary(dados)</code></pre>
<pre><code>##       id            data_inversa        dia_semana          horario         
##  Length:60365       Length:60365       Length:60365       Length:60365      
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##       uf                  br             km             municipio        
##  Length:60365       Min.   :  0.0   Length:60365       Length:60365      
##  Class :character   1st Qu.:101.0   Class :character   Class :character  
##  Mode  :character   Median :158.0   Mode  :character   Mode  :character  
##                     Mean   :209.2                                        
##                     3rd Qu.:319.0                                        
##                     Max.   :495.0                                        
##  causa_acidente     tipo_acidente      classificacao_acidente
##  Length:60365       Length:60365       Length:60365          
##  Class :character   Class :character   Class :character      
##  Mode  :character   Mode  :character   Mode  :character      
##                                                              
##                                                              
##                                                              
##    fase_dia         sentido_via        condicao_metereologica
##  Length:60365       Length:60365       Length:60365          
##  Class :character   Class :character   Class :character      
##  Mode  :character   Mode  :character   Mode  :character      
##                                                              
##                                                              
##                                                              
##   tipo_pista        tracado_via          uso_solo            pessoas      
##  Length:60365       Length:60365       Length:60365       Min.   : 1.000  
##  Class :character   Class :character   Class :character   1st Qu.: 2.000  
##  Mode  :character   Mode  :character   Mode  :character   Median : 2.000  
##                                                           Mean   : 2.588  
##                                                           3rd Qu.: 3.000  
##                                                           Max.   :61.000  
##      mortos        feridos_leves     feridos_graves        ilesos      
##  Min.   : 0.0000   Min.   : 0.0000   Min.   : 0.0000   Min.   : 0.000  
##  1st Qu.: 0.0000   1st Qu.: 0.0000   1st Qu.: 0.0000   1st Qu.: 0.000  
##  Median : 0.0000   Median : 1.0000   Median : 0.0000   Median : 1.000  
##  Mean   : 0.0831   Mean   : 0.8728   Mean   : 0.2776   Mean   : 1.043  
##  3rd Qu.: 0.0000   3rd Qu.: 1.0000   3rd Qu.: 0.0000   3rd Qu.: 1.000  
##  Max.   :23.0000   Max.   :43.0000   Max.   :30.0000   Max.   :60.000  
##    ignorados          feridos         veiculos        latitude        
##  Min.   : 0.0000   Min.   : 0.00   Min.   : 1.000   Length:60365      
##  1st Qu.: 0.0000   1st Qu.: 1.00   1st Qu.: 1.000   Class :character  
##  Median : 0.0000   Median : 1.00   Median : 2.000   Mode  :character  
##  Mean   : 0.4018   Mean   : 1.15   Mean   : 1.995                     
##  3rd Qu.: 1.0000   3rd Qu.: 1.00   3rd Qu.: 2.000                     
##  Max.   :33.0000   Max.   :45.00   Max.   :26.000                     
##   longitude           regional          delegacia             uop           
##  Length:60365       Length:60365       Length:60365       Length:60365      
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
## </code></pre>
<pre class="r"><code>##Visualização das Primeiras Linhas
head(dados)</code></pre>
<div data-pagedtable="false">
</div>
</div>
<div id="análises-exploratórias" class="section level2">
<h2>Análises Exploratórias</h2>
<div id="número-de-acidentes-por-tipo-de-causa-top-20" class="section level3">
<h3>Número de Acidentes por Tipo de Causa (Top 20)</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(causa_acidente) %&gt;%
         summarise(total = n()) %&gt;%
         arrange(desc(total)) %&gt;%
         head(20), aes(x = reorder(causa_acidente, -total), y = total)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;orange&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Número de Acidentes por Tipo de Causa (Top 10)&quot;,
    x = &quot;Causa do Acidente&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))</code></pre>

  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_top20.png" alt="Descrição da imagem" />

<h3> Número de Acidentes por Estado (UF) </h3>
<pre class="r"><code>ggplot(dados %&gt;% 
         group_by(uf) %&gt;% 
         summarise(total_acidentes = n()) %&gt;% 
         arrange(desc(total_acidentes)),
       aes(x = reorder(uf, -total_acidentes), y = total_acidentes)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;skyblue&quot;) +
  theme_minimal() + 
  labs(
    title = &quot;Número de Acidentes por Estado (UF)&quot;,
    x = &quot;Estado (UF)&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_estado.png" alt="Descrição da imagem" />

</div>
<div id="média-de-vítimas-por-tipo-de-acidente" class="section level3">
<h3>Média de Vítimas por Tipo de Acidente</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(tipo_acidente) %&gt;%
         summarise(media_vitimas = mean(pessoas, na.rm = TRUE)) %&gt;%
         arrange(desc(media_vitimas)), aes(x = reorder(tipo_acidente, -media_vitimas), y = media_vitimas)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;lightgreen&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Média de Vítimas por Tipo de Acidente&quot;,
    x = &quot;Tipo de Acidente&quot;,
    y = &quot;Média de Vítimas&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/media_acidentes.png" alt="Descrição da imagem" />


</div>
<div id="número-de-feridos-por-estado" class="section level3">

<h3>Número de Feridos por Estado</h3>
<pre class="r"><code>dados %&gt;%
  group_by(uf) %&gt;%
  summarise(
    total_feridos = sum(feridos, na.rm = TRUE)
  ) %&gt;%
  arrange(desc(total_feridos)) %&gt;%  # Organiza do maior para o menor
  ggplot(aes(x = reorder(uf, -total_feridos), y = total_feridos)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;yellow&quot;) + 
  theme_minimal() +
  labs(
    title = &quot;Número de Feridos por Estado&quot;,
    x = &quot;Estado (UF)&quot;,
    y = &quot;Total de Feridos&quot;,
  
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/feridos_estado.png" alt="Descrição da imagem" />

</div>
<div id="número-de-mortos-por-estado" class="section level3">
<h3>Número de Mortos por Estado</h3>
<pre class="r"><code>dados %&gt;%
  group_by(uf) %&gt;%
  summarise(
    total_mortos = sum(mortos, na.rm = TRUE)
  ) %&gt;%
  arrange(desc(total_mortos)) %&gt;% 
  ggplot(aes(x = reorder(uf, -total_mortos), y = total_mortos)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;red&quot;) + 
  theme_minimal() +
  labs(
    title = &quot;Número de Feridos por Estado&quot;,
    x = &quot;Estado (UF)&quot;,
    y = &quot;Total de Mortos&quot;,
    
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/mortos_estado.png" alt="Descrição da imagem" />
</div>
<div id="média-de-vítimas-por-estado-uf" class="section level3">
<h3>Média de Vítimas por Estado (UF)</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(uf) %&gt;%
         summarise(media_vitimas = mean(pessoas, na.rm = TRUE)) %&gt;%
         arrange(desc(media_vitimas)), aes(x = reorder(uf, -media_vitimas), y = media_vitimas)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;lightgreen&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Média de Vítimas por Estado&quot;,
    x = &quot;Estado v&quot;,
    y = &quot;Média de Vítimas&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/media_vitima_estado.png" alt="Descrição da imagem" />
</div>
<div id="número-de-acidentes-por-faixa-de-hora-baseado-em-horário" class="section level3">
<h3>Número de Acidentes por Faixa de Hora (baseado em horário)</h3>
<pre class="r"><code>dados %&gt;%
  mutate(faixa_horaria = cut(as.numeric(substr(horario, 1, 2)),
                             breaks = seq(0, 24, by = 3), 
                             labels = paste0(seq(0, 21, by = 3), &quot;-&quot;, seq(3, 24, by = 3)),
                             include.lowest = TRUE)) %&gt;%
  group_by(faixa_horaria) %&gt;%
  summarise(total_acidentes = n()) %&gt;%
  ggplot(aes(x = faixa_horaria, y = total_acidentes)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;blue&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Número de Acidentes por Faixa Horária&quot;,
    x = &quot;Faixa Horária&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_fixa_horario.png" alt="Descrição da imagem" />
</div>
<div id="análise-de-acidentes-por-classificação-de-acidente" class="section level3">
<h3>Análise de Acidentes por Classificação de Acidente</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(classificacao_acidente) %&gt;%
         summarise(total_acidentes = n()) %&gt;%
         arrange(desc(total_acidentes)), aes(x = reorder(classificacao_acidente, -total_acidentes), y = total_acidentes)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;purple&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Número de Acidentes por Classificação de Acidente&quot;,
    x = &quot;Classificação do Acidente&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_classificacao.png" alt="Descrição da imagem" />
</div>
<div id="distribuição-de-acidentes-por-tipo-de-pista" class="section level3">
<h3>Distribuição de Acidentes por Tipo de Pista</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(tipo_pista) %&gt;%
         summarise(total_acidentes = n()) %&gt;%
         arrange(desc(total_acidentes)), aes(x = reorder(tipo_pista, -total_acidentes), y = total_acidentes)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;lightcoral&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Número de Acidentes por Tipo de Pista&quot;,
    x = &quot;Tipo de Pista&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_pista.png" alt="Descrição da imagem" />
</div>
<div id="proporção-de-acidentes-com-feridos-leves-e-graves" class="section level3">
<h3>Proporção de Acidentes com Feridos Leves e Graves</h3>
<pre class="r"><code>dados %&gt;%
  summarise(
    proporcao_feridos_leves = sum(feridos_leves, na.rm = TRUE) / n(),
    proporcao_feridos_graves = sum(feridos_graves, na.rm = TRUE) / n()
  ) %&gt;%
  pivot_longer(cols = c(proporcao_feridos_leves, proporcao_feridos_graves), 
               names_to = &quot;tipo_ferido&quot;, 
               values_to = &quot;proporcao&quot;) %&gt;%
  ggplot(aes(x = tipo_ferido, y = proporcao, fill = tipo_ferido)) +
  geom_bar(stat = &quot;identity&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Proporção de Feridos Leves e Graves nos Acidentes&quot;,
    x = &quot;Tipo de Ferido&quot;,
    y = &quot;Proporção&quot;
  )</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/proporcao_acidentes.png" alt="Descrição da imagem" />
</div>
<div id="número-de-acidentes-por-dia-da-semana" class="section level3">
<h3>Número de Acidentes por Dia da Semana</h3>
<pre class="r"><code>ggplot(dados %&gt;%
         group_by(dia_semana) %&gt;%
         summarise(total_acidentes = n()) %&gt;%
         arrange(desc(total_acidentes)), aes(x = reorder(dia_semana, -total_acidentes), y = total_acidentes)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;green&quot;) +
  theme_minimal() +
  labs(
    title = &quot;Número de Acidentes por Dia da Semana&quot;,
    x = &quot;Dia da Semana&quot;,
    y = &quot;Total de Acidentes&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_dia_semana.png" alt="Descrição da imagem" />
</div>
<div id="análise-de-acidentes-por-causa-e-condição-meteorológica" class="section level3">
<h3>Análise de Acidentes por Causa e Condição Meteorológica</h3>
<pre class="r"><code>dados_resumo &lt;- dados %&gt;%
  group_by(condicao_metereologica) %&gt;%
  summarise(
    total_mortos = sum(mortos, na.rm = TRUE),
    total_feridos = sum(feridos, na.rm = TRUE),
    total_feridos_graves = sum(feridos_graves, na.rm = TRUE),
    total_feridos_leves = sum(feridos_leves, na.rm = TRUE)
  ) %&gt;%
  # calcula o total de acidentes em cada condição meteorológica
  mutate(total_acidentes = total_mortos + total_feridos + total_feridos_graves + total_feridos_leves)

# calcula o total geral de acidentes
total_acidentes_geral &lt;- sum(dados_resumo$total_acidentes, na.rm = TRUE)

# calcula a porcentagem de acidentes por condição meteorológica
dados_resumo &lt;- dados_resumo %&gt;%
  mutate(porcentagem = (total_acidentes / total_acidentes_geral) * 100)

# Criar o gráfico com a porcentagem de acidentes por condição meteorológica
ggplot(dados_resumo, aes(x = reorder(condicao_metereologica, -porcentagem), y = porcentagem, fill = condicao_metereologica)) +
  geom_bar(stat = &quot;identity&quot;) +
  scale_y_continuous(labels = scales::percent_format(scale = 1)) +  # Formatar o eixo Y para porcentagem
  theme_minimal() +
  labs(
    title = &quot;Porcentagem de Acidentes por Condição Meteorológica&quot;,
    x = &quot;Condição Meteorológica&quot;,
    y = &quot;Porcentagem de Acidentes&quot;,
    fill = &quot;Condição Meteorológica&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
  <img src="projeto-integrado-ciencia-de-dados/img/acidentes_metereologica.png" alt="Descrição da imagem" />
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
